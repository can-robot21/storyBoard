# PDF 미리보기 출력 형태 개선 사항

## 적용된 개선 사항

### 1. PDFPreviewModal 개선 ✅

#### iframe 높이 최적화
- **기존**: `min-h-[500px]`로 고정
- **개선**: 
  - `min-h-[600px]`로 증가
  - `height: 100%` 추가
  - `maxHeight: calc(100vh - 250px)` 추가
  - 동적 높이 조정으로 전체 내용 표시 가능

#### 로드 이벤트 처리 추가
- `onLoad`: PDF 로드 완료 시 로그 출력
- `onError`: PDF 로드 실패 시 에러 로그 출력

### 2. PDF 생성 데이터 검증 강화 ✅

#### 상세 로깅 추가
- 헤더 데이터 검증 (타이틀, 날짜, 씬)
- 스토리보드 컷 정보 (전체 수, 이미지 있는 항목, 설명 있는 항목, 이미지만 추가 항목)
- 이미지 보드 항목 정보
- 각 컷의 이미지 데이터 샘플 확인

#### 생성 결과 확인
- Blob 크기 및 타입 확인
- 예상 페이지 수 계산 및 확인
- 생성 완료 로그

### 3. PDF 생성 로직 검증

현재 PDF 생성 서비스 (`pdfGenerationServiceHybrid.ts`)는:
- ✅ 헤더를 모든 페이지에 공통 출력
- ✅ 본문을 페이지네이션 기준으로 분할
- ✅ 이미지 로드 대기 처리
- ✅ HTML → Canvas → PDF 변환

## 현재 확인 필요 사항

### 문제 진단을 위한 체크리스트

1. **PDF 생성 시 콘솔 로그 확인**
   - `📋 PDF 미리보기 데이터 준비` 로그에서 데이터 확인
   - `🖼️ 컷 X 이미지 샘플` 로그에서 이미지 데이터 확인
   - `✅ PDF 생성 완료` 로그에서 Blob 정보 확인

2. **PDF 미리보기에서 확인할 사항**
   - 헤더 테이블이 제대로 표시되는가?
   - 이미지가 제대로 렌더링되는가?
   - 텍스트가 제대로 표시되는가?
   - 페이지네이션이 제대로 적용되는가?

3. **발생 가능한 문제와 해결책**

#### 문제 1: PDF가 비어 있음
- **원인**: 이미지 데이터가 없거나 잘못된 형식
- **해결**: 콘솔에서 이미지 샘플 로그 확인, Base64 데이터 확인

#### 문제 2: 헤더만 보이고 본문이 안 보임
- **원인**: 본문 HTML 생성 실패 또는 캔버스 캡처 실패
- **해결**: PDF 생성 서비스의 로그 확인, `generateStoryBoardBodyHTML` 함수 검증

#### 문제 3: 이미지가 표시되지 않음
- **원인**: Base64 데이터가 손상되었거나 이미지 로드 실패
- **해결**: 이미지 로드 대기 로직 확인, CORS 설정 확인

#### 문제 4: 페이지네이션이 잘못됨
- **원인**: 페이지당 항목 수 계산 오류
- **해결**: `itemsPerPage` 값 확인 (StoryBoard: 5, ImageBoard: 9)

## 추가 개선 제안

### 1. PDF.js 통합 (선택적)
- 브라우저 기본 PDF 뷰어 대신 PDF.js 사용
- 더 나은 제어 및 에러 처리 가능
- 페이지 네비게이션 개선

### 2. 로딩 상태 표시
- PDF 생성 중 스피너 표시
- 진행률 표시 (페이지 수 기반)

### 3. 에러 처리 강화
- 특정 에러 타입별 안내 메시지
- PDF 재생성 버튼 제공

## 테스트 방법

1. **스토리보드 데이터 입력**
   - 헤더 정보 입력 (타이틀, 날짜, 시간 등)
   - 컷 추가 및 이미지 업로드
   - 설명 입력

2. **PDF 미리보기 실행**
   - 저장 버튼 클릭
   - PDF 미리보기 버튼 클릭

3. **결과 확인**
   - 콘솔 로그 확인
   - PDF 미리보기에서 내용 확인
   - 페이지 이동 테스트 (2페이지 이상일 경우)

4. **문제 발생 시**
   - 콘솔 로그 전체 확인
   - 특정 단계에서 실패하는지 확인
   - 이미지 데이터 형식 확인

