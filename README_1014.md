# StoryBoard AI 영상 제작 도구 - 기능 정리 (2025-01-14)

## 📋 **프로젝트 개요**
AI 기반 영상 제작 도구로, 텍스트 프롬프트와 이미지를 활용하여 스토리보드, 이미지, 영상을 생성하는 통합 플랫폼입니다. 사용자가 스토리를 입력하면 AI가 텍스트를 생성하고, 이를 바탕으로 이미지와 영상을 순차적으로 생성하는 워크플로우를 제공합니다.

---

## 🚀 **주요 기능**

### 1. **프로젝트 관리**
- **프로젝트 생성/저장/로드**: IndexedDB 기반 로컬 저장
- **프로젝트 참조 데이터**: 생성된 모든 콘텐츠를 프로젝트별로 관리
- **프로젝트 초기화**: 모든 프로젝트 데이터 초기화 기능
- **SQLite 텍스트 백업**: 텍스트 데이터만 별도 백업 및 복구

### 2. **AI 텍스트 생성**
- **스토리 시나리오 생성**: AI 기반 시나리오 프롬프트 생성
- **500자 스토리 자동 요약**: 긴 스토리를 500자로 요약
- **최종 시나리오 생성**: AI 검토 및 최종 시나리오 생성
- **텍스트 카드 생성**: 에피소드별 구조화된 텍스트 카드 생성

### 3. **AI 이미지 생성**
- **캐릭터 이미지 생성**: 스토리와 캐릭터 정보 기반 AI 이미지 생성
- **배경 이미지 생성**: 시나리오 기반 배경 이미지 생성
- **설정 컷 이미지 생성**: 스토리와 캐릭터를 조합한 설정 컷 이미지 생성
- **나노바나나 고급 이미지**: Gemini 2.5 Flash Image Preview 고급 이미지 생성
- **멀티모달 생성**: 텍스트 + 이미지 조합 생성

### 4. **AI 영상 생성**
- **컷별 영상 생성**: 구조화된 텍스트 카드 기반 영상 생성
- **참조 이미지 활용**: 생성된 이미지를 참조하여 영상 생성
- **Veo API 연동**: Google AI Veo API를 통한 실제 영상 생성
- **프롬프트 수정 기능**: 컷별 상세 프롬프트 수정 및 최적화
- **빠른 생성 옵션**: 프롬프트 수정 단계 생략 가능

### 5. **에피소드/씬 구조 관리**
- **에피소드 구조 정의**: 에피소드별 씬과 컷 구성 관리
- **씬별 텍스트 카드**: 에피소드 내 씬별 텍스트 카드 생성
- **컷별 선택**: 에피소드 내 특정 컷만 선택하여 카드 생성
- **실시간 동기화**: 에피소드 구조 변경 시 실시간 반영

### 6. **데이터 관리 및 최적화**
- **스토리지 모니터링**: LocalStorage 및 IndexedDB 사용량 실시간 모니터링
- **백업 관리**: 수동/자동 백업 생성, 복구, 삭제
- **데이터 압축**: LZ-string을 활용한 데이터 압축
- **자동 정리**: 24시간 이상 된 임시 데이터 자동 삭제

---

## 📱 **페이지별 용도 및 사용법**

### **1. 프로젝트 개요 (Project Overview)**

#### **주요 기능**
- **스토리 기본 설정**: 프로젝트 제목, 설명, 스토리 입력
- **캐릭터 관리**: 캐릭터 추가/삭제 및 설명 관리
- **AI 기반 시나리오 생성**: 5단계 시나리오 생성 프로세스
- **에피소드/씬 구조 관리**: 에피소드별 씬과 컷 구성 정의
- **프로젝트 개요 저장**: 국문/영문 카드 생성

#### **5단계 생성 프로세스**
1. **스토리 기본 설정**: 주요 스토리 라인, 영상 스타일, 시각적 요소 입력
2. **캐릭터 설정**: 캐릭터 이름, 외모 특징, 성격 특성, 의상 스타일 입력
3. **시나리오용 프롬프트 AI 생성**: 상세 스토리 텍스트, 주요 대사, 장면별 구성
4. **장소와 에피소드 핵심 상황**: 주요 장소, 핵심 에피소드, 상황 설정
5. **시나리오 추가 설정**: 추가적인 스토리 요소, 특별한 설정, 보완할 내용

#### **에피소드/씬 구조 관리**
- **에피소드 추가/편집/삭제**: 에피소드별 제목과 설명 관리
- **씬 추가/편집/삭제**: 각 에피소드 내 씬 구성 관리
- **컷 수 설정**: 각 씬별 컷 개수 설정
- **실시간 동기화**: 구조 변경 시 프로젝트 참조 모달에 즉시 반영

#### **카드 생성 기능**
- **카드 초안 작성**: 한글 프롬프트 초안 생성
- **카드 초안 생성**: AI 기반 상세 카드 초안 생성
- **한글 카드 초안**: 에피소드 구조 기반 한글 카드 생성
- **영어 카드 생성**: 설정된 씬/컷 구성 참조로 영어 카드 생성

### **2. 이미지 생성 (Image Generation)**

#### **주요 기능**
- **Google AI (Imagen)**: 기본 이미지 생성 API
- **이미지 비율 선택**: 16:9, 9:16, 1:1 (세로 배치)
- **캐릭터/배경/설정컷 이미지 생성**: 각 타입별 전용 이미지 생성
- **멀티모달 생성**: 텍스트 + 이미지 조합 생성
- **개별/전체 재생성 및 저장**: 생성된 이미지 관리

#### **이미지 관리 기능**
- **📥 다운로드**: 이미지 우클릭 또는 다운로드 버튼으로 로컬 저장
- **✏️ 편집**: 이미지 설명 텍스트 수정
- **🗑️ 삭제**: 불필요한 이미지 삭제
- **☑️ 선택**: 영상 생성용 이미지 선택

### **3. 이미지 생성/나노 바나나 (Nano Banana Image Generation)**

#### **주요 기능**
- **Gemini 2.5 Flash Image Preview**: 고급 이미지 생성
- **커스텀 사이즈 설정**: 사용자 정의 이미지 크기 설정
- **추가 프롬프트 입력**: 세부 요구사항 지정
- **이미지 스타일 선택**: realistic, cartoon, anime, 3d, watercolor, oil_painting
- **이미지 품질 선택**: high, standard, ultra

#### **고급 옵션**
- **기타 사이즈 요청사항**: 1920x1080, 4K, 세로형 등 사용자 정의 크기
- **추가 프롬프트**: 세부 요구사항을 위한 추가 프롬프트 입력
- **멀티모달 지원**: 텍스트 + 이미지 참조 생성

### **4. 영상 생성 (Video Generation)**

#### **주요 기능**
- **씬 공통설정**: 전체 씬에 적용되는 공통 설정
- **컷 숫자 설정**: 기본 1컷, 사용자 정의 가능
- **AI 텍스트 카드 생성**: 구조화된 컷별 텍스트 생성 (500-5000자 제한)
- **캐릭터 이미지 생성**: 캐릭터/의상 기반 이미지 생성
- **영상 배경 생성**: 영상 배경 이미지 생성
- **AI 영상 생성**: 선택된 항목들로 최종 영상 생성

#### **텍스트 카드 생성**
- **에피소드별 생성**: 에피소드 구조 기반 텍스트 카드 생성
- **컷별 선택**: 에피소드 내 특정 컷만 선택하여 카드 생성
- **구조화된 출력**: 필수/추가 항목으로 분류된 컷별 설명
- **씬별 관리**: 씬 단위로 그룹화된 컷 관리 시스템

#### **영상 생성 옵션**
- **영상 모델 선택**: VEO 2.0 (기본), VEO 3.0 Fast, VEO 3.0 Standard
- **선택 기능**: 텍스트 카드, 캐릭터 이미지, 영상 배경 선택
- **프롬프트 수정**: 컷별 상세 프롬프트 수정 및 최적화
- **빠른 생성**: 프롬프트 수정 단계 생략 옵션

#### **영상 관리 기능**
- **📥 다운로드**: 생성된 영상 다운로드
- **▶️ 재생**: 영상 재생 (올바른 화면비율 적용)
- **📊 화면비율 표시**: 16:9 또는 9:16 화면비율 표시
- **🖼️ 썸네일**: 정사각형 썸네일 표시

### **5. 프로젝트 참조 (Project Reference)**

#### **주요 기능**
- **통합 데이터 관리**: 생성된 모든 콘텐츠를 한 곳에서 확인 및 관리
- **실시간 동기화**: 에피소드 구조 변경 시 실시간 반영
- **데이터 편집/삭제**: 개별 항목 편집 및 삭제 기능
- **프로젝트 초기화**: 모든 프로젝트 데이터 초기화

#### **데이터 섹션**
- **프로젝트 정보**: 스토리, 캐릭터, 시나리오 정보
- **에피소드-씬 구조**: 에피소드별 씬과 컷 구성
- **JSON 카드 (한국어)**: 생성된 한국어 카드 데이터
- **JSON 카드 (영어)**: 생성된 영어 카드 데이터
- **일반 텍스트 카드**: 생성된 텍스트 카드 데이터
- **생성된 이미지**: 캐릭터, 배경, 설정컷 이미지
- **생성된 영상**: 최종 생성된 영상 파일

#### **스토리지 관리**
- **스토리지 상태 모니터링**: LocalStorage 및 IndexedDB 사용량 실시간 표시
- **백업 관리**: 수동/자동 백업 생성, 복구, 삭제
- **데이터 최적화**: 압축, 중복 제거, 구조 최적화
- **SQLite 텍스트 백업**: 텍스트 데이터만 별도 백업 및 복구

---

## 🔧 **기술적 개선사항**

### **1. 상태 관리 개선**
- **ID 기반 삭제**: 배열 인덱스 대신 고유 ID를 사용한 안정적인 삭제
- **React Key 최적화**: 고유한 key prop으로 리렌더링 최적화
- **상태 동기화**: 삭제 시 선택 상태와 메인 상태 동기화
- **실시간 업데이트**: 커스텀 이벤트를 통한 컴포넌트 간 실시간 동기화

### **2. 사용자 경험 개선**
- **프롬프트 입력 모달**: AI 생성 전 프롬프트 확인 및 수정
- **실시간 알림**: 성공/실패/경고 알림 시스템
- **로딩 상태 표시**: 생성 중 상태를 명확히 표시
- **에러 처리**: 상세한 에러 메시지와 복구 방법 제시
- **진행률 표시**: 단계별 진행 상황 실시간 표시

### **3. 성능 최적화**
- **데이터 압축**: LZ-string을 활용한 데이터 압축
- **캐싱 시스템**: 메모리 캐시 + localStorage TTL 기반 캐싱
- **API 호출 최적화**: 불필요한 API 호출 방지 및 배치 처리
- **메모리 관리**: 이미지 데이터 효율적 관리
- **자동 정리**: 24시간 이상 된 임시 데이터 자동 삭제

### **4. UI/UX 개선**
- **직관적인 버튼 배치**: 다운로드 → 편집 → 삭제 순서
- **색상 구분**: 기능별 버튼 색상 구분 (초록/파랑/빨강)
- **툴팁 제공**: 버튼 기능 설명 툴팁
- **반응형 디자인**: 모바일과 데스크톱 모두 지원
- **모달 최적화**: 대형 모달을 작은 컴포넌트로 분할

---

## 📊 **API 사용량 관리**

### **실시간 모니터링**
- **토큰 사용량**: 실시간 토큰 소모량 표시
- **비용 계산**: API 사용 비용 실시간 계산
- **호출 통계**: 타입별, 모델별 API 호출 통계
- **이벤트 기반 업데이트**: API 호출 완료 시 실시간 업데이트

### **세션 관리**
- **사용량 초기화**: 세션별 사용량 초기화 기능
- **상세 통계**: AI 서비스 설정 모달에서 상세 통계 확인
- **API 키 관리**: 개별 사용자별 API 키 설정 및 관리

---

## 🎯 **주요 워크플로우**

### **1. 기본 영상 제작 워크플로우**
```
프로젝트 생성 → 스토리/캐릭터 입력 → 에피소드 구조 정의 → 이미지 생성 → 텍스트 카드 생성 → 영상 생성 → 결과 확인
```

### **2. 이미지 생성 워크플로우**
```
AI 이미지 생성 → 프롬프트 입력 → 확인 후 생성 → 이미지 관리 (편집/삭제/다운로드) → 영상 생성용 선택
```

### **3. 영상 생성 워크플로우**
```
에피소드 구조 정의 → 텍스트 카드 생성 → 이미지 선택 → 프롬프트 수정 (선택) → 영상 생성 → 결과 확인
```

### **4. 프로젝트 관리 워크플로우**
```
프로젝트 참조 확인 → 데이터 편집/삭제 → 백업 생성 → 스토리지 최적화 → 프로젝트 초기화 (필요시)
```

---

## 🔒 **보안 및 개인정보**

### **로컬 저장**
- **IndexedDB**: 브라우저 로컬 데이터베이스 사용
- **localStorage**: 설정 및 임시 데이터 저장
- **데이터 암호화**: 민감한 정보는 암호화하여 저장
- **SQLite 백업**: 텍스트 데이터만 별도 백업

### **API 키 관리**
- **로컬 저장**: API 키는 사용자 로컬에만 저장
- **암호화**: API 키는 암호화되어 저장
- **보안 설정**: AI 서비스 설정 모달에서 안전하게 관리

---

## 📈 **향후 개선 계획**

### **1. 기능 확장**
- **음성 생성**: AI 기반 음성/내레이션 생성
- **자막 생성**: 자동 자막 생성 기능
- **영상 편집**: 기본적인 영상 편집 기능
- **협업 기능**: 팀원과의 프로젝트 공유

### **2. 성능 개선**
- **배치 처리**: 여러 이미지 동시 생성
- **백그라운드 처리**: 긴 작업의 백그라운드 처리
- **CDN 연동**: 이미지 및 영상 CDN 연동

### **3. 사용자 경험**
- **템플릿 시스템**: 미리 정의된 템플릿 제공
- **버전 관리**: 프로젝트 버전 관리 시스템
- **자동 저장**: 작업 중 자동 저장 기능

---

## 🛠️ **기술 스택**

### **Frontend**
- **React 19.1.1**: 최신 React 기능 활용
- **TypeScript 4.9.5**: 타입 안전성 보장
- **Tailwind CSS 3.4.17**: 유틸리티 퍼스트 CSS 프레임워크
- **Zustand 5.0.8**: 경량 상태 관리 라이브러리

### **AI 서비스**
- **Google AI (Gemini)**: 텍스트 생성 및 이미지 생성
- **Google AI (Veo)**: 영상 생성
- **Imagen API**: 고품질 이미지 생성
- **Gemini 2.5 Flash Image Preview**: 고급 이미지 생성

### **데이터베이스**
- **IndexedDB**: 클라이언트 사이드 데이터베이스
- **localStorage**: 설정 및 캐시 데이터
- **SQLite (IndexedDB 구현)**: 텍스트 데이터 백업

### **유틸리티**
- **LZ-string**: 데이터 압축
- **Lucide React**: 아이콘 라이브러리
- **Axios**: HTTP 클라이언트

---

## 📞 **지원 및 문의**

프로젝트 관련 문의사항이나 버그 리포트는 개발팀에 연락해 주세요.

---

**최종 업데이트**: 2025년 1월 14일  
**버전**: v2.4.0  
**개발자**: star612.net  
**라이선스**: MIT
